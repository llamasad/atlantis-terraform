version: 3
projects:
  - dir: .
    autoplan:
      when_modified: ["*.tf", "*.tfvars"]
      enabled: true
    apply_requirements: [approved]
    workflow: custom-destroy-workflow

workflows:
  custom-destroy-workflow:
    plan:
      steps:
        - init
        - plan:
            extra_args: ["-destroy"]
    apply:
      steps:
        - apply
